/**
  ******************************************************************************
  * @file           : CAN_BUS.c
  * @brief          : CAN_BUS code file
  ******************************************************************************
  * @attention
  *
  * (c) 2024 Uniovi E-tech Racing.
  * 
  *
  ******************************************************************************  
  ******************************************************************************
																Version Control
	******************************************************************************
	******************************************************************************		
  Version | dd mmm yyyy |       Who        | Description of changes
  ========|=============|==================|====================================
    1.0   | 01 MAR 2023 | Diego Rodríguez  | Creation
	========|=============|==================|====================================
	
  ******************************************************************************
  ******************************************************************************
  */
/*******************************************************************************
********************************************************************************
***************						  			 	INCLUDES					  				 ***************
********************************************************************************
*******************************************************************************/
#include "Can_Bus.h"



/*******************************************************************************
********************************************************************************
***************						  			 	CAN 1					  		    		 ***************
********************************************************************************
*******************************************************************************/
void CAN1_Send(CAN_Tx_Message_TypeDef* CAN_Message)
{
	CAN_TxHeaderTypeDef   TxHeader;	
	TxHeader.IDE = CAN_ID_STD;
	TxHeader.StdId = CAN_Message->ID;
	TxHeader.RTR = CAN_RTR_DATA;
	TxHeader.DLC = CAN_Message->DLC;
	MCU_CAN1_Send(&TxHeader, CAN_Message->Data, &CAN_Message->Mailbox);
}

void CAN1_Interrupt_DoTask(void)
{
	Control_Unit_CAN1_Interrupt();
}


/*******************************************************************************
********************************************************************************
***************						  			 	CAN 2					  		    		 ***************
********************************************************************************
*******************************************************************************/
void CAN2_Send(CAN_Tx_Message_TypeDef* CAN_Message)
{
	CAN_TxHeaderTypeDef   TxHeader;	
	TxHeader.IDE = CAN_ID_STD;
	TxHeader.StdId = CAN_Message->ID;
	TxHeader.RTR = CAN_RTR_DATA;
	TxHeader.DLC = CAN_Message->DLC;
	MCU_CAN2_Send(&TxHeader, CAN_Message->Data, &CAN_Message->Mailbox_2);
}

void CAN2_Interrupt_DoTask(void)
{
	Control_Unit_CAN2_Interrupt();
}
